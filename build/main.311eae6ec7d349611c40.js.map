{"version":3,"sources":["webpack:///./js/gallery.js","webpack:///./index.js","webpack:///./templates/galleryItems.hbs","webpack:///./templates/form.hbs"],"names":["pageNumber","per_page","query","getUrl","baseUrl","this","fetchImg","fetch","then","response","json","incrementPage","hits","str","resetPage","refs","spinner","classList","add","imgService","fetchAnswer","markup","cards","gallery","insertAdjacentHTML","remove","document","querySelectorAll","querySelector","loadButton","queryButton","form","addEventListener","renderCards","top","window","innerHeight","scrollBy","behavior","innerHTML","newQuery","value","searchQuery","e","target","nodeName","basicLightbox","dataset","url","source","show","modalWindow","IntersectionObserver","console","log","rootMargin","observe","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","helperMissing","alias3","alias4","escapeExpression","webformatURL","call","largeImageURL","pageURL","likes","views","comments","downloads","stack1","each","program","noop"],"mappings":"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","file":"main.311eae6ec7d349611c40.js","sourcesContent":["export default {\n  pageNumber: 0,\n  per_page: 12,\n  query: '',\n  getUrl() {\n    const baseUrl = 'https://pixabay.com/api/';\n    const key = '13266916-cbb933a2194e370075cd13811';\n    return `${baseUrl}?image_type=photo&orientation=horizontal&q=${\n      this.query\n    }&page=${this.pageNumber}&per_page=${this.per_page}&key=${key}`;\n  },\n  \n  fetchImg() {\n    return fetch(this.getUrl())\n      .then(response => response.json())\n      .then(response => {\n        this.incrementPage();\n        return response.hits;\n      });\n  },\n\n  get searchQuery() {\n    return this.query;\n  },\n\n  set searchQuery(str) {\n    this.query = str;\n  },\n\n  incrementPage() {\n    this.pageNumber += 1;\n  },\n\n  resetPage() {\n    this.pageNumber = 1;\n  },\n};\n","import './styles.css';\nimport 'basiclightbox/dist/basicLightbox.min.css';\nimport * as basicLightbox from 'basiclightbox';\nimport imgService from './js/gallery';\nimport form from './templates/form.hbs';\nimport cards from './templates/galleryItems.hbs';\n\nconst refs = {\n  gallery: document.querySelector('.gallery'),\n  spinner: document.querySelector('.spinner'),\n  loadButton: document.querySelector('#loadButton'),\n  queryButton: document.querySelector('#queryButton'),\n};\n\nrenderForm();\n\nrefs.loadButton.addEventListener('click', async () => {\n  await renderCards();\n  scroll();\n});\n\nrefs.queryButton.addEventListener('click', queryUpdate);\n\nrefs.gallery.addEventListener('click', e => modalWindow(e));\n\nfunction renderForm() {\n  document.querySelector('.query').insertAdjacentHTML('afterbegin', form());\n}\n\nasync function renderCards(query) {\n  refs.spinner.classList.add('isActive');\n  const fetchAnswer = await imgService.fetchImg(query);\n  const markup = cards(fetchAnswer);\n  refs.gallery.insertAdjacentHTML('beforeEnd', markup);\n  refs.spinner.classList.remove('isActive');\n  let items = document.querySelectorAll('.photo__item');\n}\n\nfunction queryUpdate() {\n  imgService.resetPage();\n  refs.gallery.innerHTML = '';\n  const newQuery = document.querySelector('input[name=\"query\"]').value;\n  imgService.searchQuery = newQuery;\n  renderCards(newQuery);\n}\n\nfunction scroll() {\n  let top = window.innerHeight - 50;\n  window.scrollBy({\n    top: top,\n    behavior: 'smooth',\n  });\n}\n\nfunction modalWindow(e) {\n  if (e.target.nodeName === 'IMG') {\n    const instance = basicLightbox.create(`\n  <a href=${e.target.dataset.url} target=\"_blank\" rel=\"noopener noreferrer\">\n  <img width=\"1400\" height=\"900\" src=${e.target.dataset.source}>\n  </a>`);\n\n    instance.show();\n  }\n}\n\nconst options = {\n  rootMargin: '0px 0px 200px 0px',\n};\n\nconst observer = new IntersectionObserver(() => {\n  if (imgService.pageNumber > 1) {\n    console.log('obs');\n    renderCards();\n    console.log(imgService.pageNumber);\n  }\n}, options);\n\nobserver.observe(refs.loadButton);\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"photo__item\\\">\\n\\n  <div class=\\\"photo-card\\\">\\n\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" alt=\\\"\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" data-url=\\\"\"\n    + alias4(((helper = (helper = helpers.pageURL || (depth0 != null ? depth0.pageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"pageURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"/>\\n\\n    <div class=\\\"stats\\\">\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">thumb_up</i>\\n        \"\n    + alias4(((helper = (helper = helpers.likes || (depth0 != null ? depth0.likes : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">visibility</i>\\n        \"\n    + alias4(((helper = (helper = helpers.views || (depth0 != null ? depth0.views : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">comment</i>\\n        \"\n    + alias4(((helper = (helper = helpers.comments || (depth0 != null ? depth0.comments : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">cloud_download</i>\\n        \"\n    + alias4(((helper = (helper = helpers.downloads || (depth0 != null ? depth0.downloads : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\n      </p>\\n    </div>\\n  </div>\\n\\n</li>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\");\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<form class=\\\"search-form\\\" id=\\\"search-form\\\">\\n  <input\\n    type=\\\"text\\\"\\n    name=\\\"query\\\"\\n    autocomplete=\\\"off\\\"\\n    placeholder=\\\"Search images...\\\"\\n  />\\n</form>\\n\";\n},\"useData\":true});"],"sourceRoot":""}